CREATE TABLE dramas (
    drama_id INTEGER PRIMARY KEY,      -- MDL ID (e.g. 49231)
    title TEXT,
    native_title TEXT,
    aka_titles TEXT,
    year INTEGER,
    country TEXT,
    type TEXT,
    episodes INTEGER,
    duration TEXT,
    rating REAL,
    ranked INTEGER,
    popularity INTEGER,
    content_rating TEXT,
    description TEXT,
    url TEXT UNIQUE
);

CREATE TABLE tags (
    tag_id INTEGER PRIMARY KEY,       -- MDL tag id (from "th=" in link)
    name TEXT UNIQUE
);

CREATE TABLE drama_tags (
    drama_id INTEGER,
    tag_id INTEGER,
    PRIMARY KEY (drama_id, tag_id),
    FOREIGN KEY (drama_id) REFERENCES dramas(drama_id),
    FOREIGN KEY (tag_id) REFERENCES tags(tag_id)
);

CREATE TABLE casts (
    cast_id INTEGER PRIMARY KEY,      -- MDL person id (from /people/xxxxx)
    name TEXT UNIQUE
);

CREATE TABLE drama_casts (
    drama_id INTEGER,
    cast_id INTEGER,
    role TEXT,
    PRIMARY KEY (drama_id, cast_id, role),
    FOREIGN KEY (drama_id) REFERENCES dramas(drama_id),
    FOREIGN KEY (cast_id) REFERENCES casts(cast_id)
);
